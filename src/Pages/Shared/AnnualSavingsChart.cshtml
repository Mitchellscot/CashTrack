@model CashTrack.Pages.Shared.AnnualSavingsChart
@{
}
<script>
    const @Model.VariableName = document.getElementById(@Json.Serialize(@Model.ElementId)).getContext('2d');
    const @Model.ElementId = new Chart(@Model.VariableName, {
        type: 'line',
        data: {
            labels: @Html.Raw(@Model.Labels),
            datasets:[
            {
                label: 'Savings',
                data: @Model.Dataset,
                color: 'rgba(0, 0, 0, 0)',
                backgroundColor: @Html.Raw(Model.SavingsColor),
                borderColor: @Html.Raw(Model.SavingsColor),
                borderWidth: 3,
                fill: true,
                cubicInterpolationMode: 'monotone',
                tension: 1,
                segment:{
                    borderColor: colorizeSegment(),
                    backgroundColor: colorizeSegment()
                }
            },
            ]
        },
        options: {
            responsive: true,
            plugins:{
                title: {
                    display: false
                },
                legend: {
                    display: false
                },
            }
        },
    });
        function colorizeSegment() {
        return (ctx) => {
            const v = ctx.p0.raw;
            if(v < 0)
                return @Html.Raw(Model.NegativeSavingsColor)
            else
                return @Html.Raw(Model.SavingsColor)
        }
    };

</script>